<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.passenger.mapper.CtrlEventMapper">
<select id="selectAllCtrlEvent"  resultType="com.example.passenger.entity.CtrlEvent">
       	SELECT TOP
        (#{pageSize}) *
        FROM
            (
            SELECT
                ROW_NUMBER () OVER ( ORDER BY id DESC) AS RowNumber,*
            FROM
                Ctrl_Event
			WHERE
				DeviceID =#{deviceID}
            ) AS A
        WHERE
            RowNumber > #{pageSize} * (
            #{pageNum}-1)


</select>
<select id="count" resultType="java.lang.Integer">
        SELECT
        COUNT(*)
        FROM
            Ctrl_Event
        WHERE
            DeviceID =#{deviceID}
</select>
<insert id="insertCtrlEvent" parameterType="com.example.passenger.entity.CtrlEvent">
        INSERT INTO Ctrl_Event
        VALUES
            (
                #{deviceID},
                #{ctrlType},
                #{ctrlTime},
                #{ctrlResult},
                #{note},
            #{stationID},
            #{lineID})
</insert>
</mapper>