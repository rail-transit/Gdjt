<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.passenger.mapper.DeviceMapper">
<select id="selectDevice" parameterType="java.lang.Integer" resultType="com.example.passenger.entity.Device">
        SELECT
            *
        FROM
            Device
        WHERE
            id =#{id}
</select>
<select id="selectDeviceByIp" parameterType="java.lang.String" resultType="com.example.passenger.entity.Device">
        SELECT
            *
        FROM
            Device
        WHERE
            IP =#{ip}
</select>
<select id="selectAllDevice" parameterType="java.lang.Integer" resultType="com.example.passenger.entity.Device">
        SELECT
            *
        FROM
            Device
        WHERE
            StationID =#{stationID}
</select>
<select id="queryAllDevice" resultType="com.example.passenger.entity.Device">
    SELECT
        *
    FROM
        Device
</select>
<select id="selectDevicePaging"  resultType="com.example.passenger.entity.Device">
        SELECT TOP
        (#{pageSize}) *
        FROM
            (
            SELECT
                ROW_NUMBER () OVER ( ORDER BY id DESC) AS RowNumber,*
            FROM
                Device
            <where>
                <if test="stationID!=null and stationID!=0">
                    StationID=#{stationID}
                </if>
                <if test="type!=null and type!=0">
                    and Type=#{type}
                </if>
            </where>
            ) AS A
        WHERE
            RowNumber > #{pageSize} * (
            #{pageNum}-1)
</select>
<select id="count" resultType="java.lang.Integer">
        SELECT COUNT
            (*)
        FROM
            Device
        <where>
            <if test="stationID!=null and stationID!=0">
                StationID=#{stationID}
            </if>
            <if test="type!=null and type!=0">
                and Type=#{type}
            </if>
        </where>
</select>
<insert id="addDevice" parameterType="com.example.passenger.entity.Device">
        INSERT INTO Device
        VALUES
            (
                #{deviceID},
                #{name},
                #{des},
                #{type},
                #{devicePosID},
                #{ip},
                #{mac},
                #{stationID},
                #{lineID},
                #{param},
            #{resolution},
            #{isBackups})
</insert>
<update id="updateDevice" parameterType="com.example.passenger.entity.Device">
        UPDATE Device
        SET DeviceID =#{deviceID},
        Name =#{name},
        Des =#{des},
        Type =#{type},
        DevicePosID =#{devicePosID},
        IP =#{ip},
        Mac =#{mac},
        StationID =#{stationID},
        LineID =#{lineID},
        Param =#{param},
        Resolution =#{resolution},
        IsBackups =#{isBackups}
        WHERE
            id =#{id}
</update>
<delete id="deleteDevice" parameterType="java.lang.Integer">
        DELETE
        FROM
            Device
        WHERE
            id =#{id}
</delete>
<delete id="deleteDeviceByLineId" parameterType="java.lang.Integer">
        DELETE
        FROM
            Device
        WHERE
            LineID =#{lineID}
</delete>
<delete id="deleteDeviceByStationId" parameterType="java.lang.Integer">
        DELETE
        FROM
            Device
        WHERE
            StationID =#{stationID}
</delete>
</mapper>